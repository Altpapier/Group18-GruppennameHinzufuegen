<!DOCTYPE html>
<html lang="de">
    <head>
        <script type="text/javascript" src="darkMode.js"></script>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="style.css" />
        <link rel="icon" href="assets/icon_neu.png" />
        <title>Lecturer Overview</title>
        <script src="courseManager.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.5.1/dist/chart.umd.min.js"></script>
    </head>
    <body>
        <header>
            <a href="kurse_lecturer.html" class="logo">
                <img src="assets/titel_logo_neu.png" alt="logo" />
            </a>
            <div id="darkmode-toggle" class="light" onClick="toggle();">
                <div class="big">
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
                <div class="small"></div>
                <div class="small"></div>
                <div class="small"></div>

            </div>
        </header>
        <main>
            <h1 class="course-title" id="courseTitle">Grundlagen der Mensch-Computer-Interaktion</h1>
            <div class="flex_wrap">
                <div style="overflow-x: scroll; flex: 1;">
                    <h2>Übersicht der Letzten Wochen:</h2>
                    <div class="field">
                        <h2>Woche 1</h2>
                        <div class="select-10">
                            <span>1</span>
                            <span>2</span>
                            <span>3</span>
                            <span>4</span>
                            <span class="selected">5</span>
                            <span>6</span>
                            <span>7</span>
                            <span>8</span>
                            <span>9</span>
                            <span>10</span>
                        </div>
                    </div>
                    <div class="field">
                        <h2>Woche 2</h2>
                        <div class="select-10">
                            <span>1</span>
                            <span>2</span>
                            <span>3</span>
                            <span>4</span>
                            <span>5</span>
                            <span>6</span>
                            <span>7</span>
                            <span>8</span>
                            <span class="selected">9</span>
                            <span>10</span>
                        </div>
                    </div>
                    <div class="field">
                        <h2>Woche 3</h2>
                        <div class="select-10">
                            <span>1</span>
                            <span class="selected">2</span>
                            <span>3</span>
                            <span>4</span>
                            <span>5</span>
                            <span>6</span>
                            <span>7</span>
                            <span>8</span>
                            <span>9</span>
                            <span>10</span>
                        </div>
                    </div>
                </div>
                <div style="flex: 1;">
                    <canvas id="myChart"></canvas>
                </div>
            </div>
            <button style="margin: 1rem;" class="right" onclick="goToEditCourse();">Einstellungen</button>
            <footer class="page-footer">
                <a class="button" href="kurse_lecturer.html">Zurück zu den Kursen</a>
                <a class="button" id="startCourseBtn" href="">Live-Session Starten</a>
            </footer>
        </main>
        <script>
            const data = {
                labels: ["W1", "W2", "W3"],
                datasets: [
                    {
                        label: "Bewertung",
                        data: [5, 9, 2],
                        backgroundColor: [
                            "rgba(255, 99, 132, 0.2)",
                            "rgba(255, 159, 64, 0.2)",
                            "rgba(255, 205, 86, 0.2)",
                            "rgba(75, 192, 192, 0.2)",
                            "rgba(54, 162, 235, 0.2)",
                            "rgba(153, 102, 255, 0.2)",
                            "rgba(201, 203, 207, 0.2)",
                        ],
                        borderColor: [
                            "rgb(255, 99, 132)",
                            "rgb(255, 159, 64)",
                            "rgb(255, 205, 86)",
                            "rgb(75, 192, 192)",
                            "rgb(54, 162, 235)",
                            "rgb(153, 102, 255)",
                            "rgb(201, 203, 207)",
                        ],
                        borderWidth: 1,
                    },
                ],
            };
            const myChart = new Chart("myChart", {
                type: "bar",
                data: data,
                options: {
                    scales: {
                        y: {
                            min: 0,
                            max: 10,
                        },
                    },
                },
            });

            // Dynamischen Kursnamen laden
            function loadCourseName() {
                const params = new URLSearchParams(window.location.search);
                const courseId = parseInt(params.get('courseId'));
                
                if (courseId) {
                    const course = courseManager.getCourseById(courseId);
                    if (course) {
                        document.getElementById('courseTitle').textContent = course.name;
                    }
                } else {
                    console.log('Keine Course ID in URL gefunden');
                }
            }

            function goToEditCourse() {
                const params = new URLSearchParams(window.location.search);
                const courseId = params.get('courseId');
                if (courseId) {
                    window.location.href = `edit_course.html?courseId=${courseId}`;
                } else {
                    window.location.href = 'edit_course.html';
                }
            }

            document.addEventListener('DOMContentLoaded', function() {
                loadCourseName();
                
                const params = new URLSearchParams(window.location.search);
                const courseId = params.get('courseId');
                const startBtn = document.getElementById('startCourseBtn');
                
                if (courseId) {
                    startBtn.href = `live_feedback_lecturer.html?courseId=${courseId}`;
                }
            });
        </script>
    </body>
</html>
